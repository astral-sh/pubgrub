<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Trait that allows the algorithm to retrieve available packages and their dependencies. An implementor needs to be supplied to the resolve function."><title>DependencyProvider in pubgrub::solver - Rust</title><script> if (window.location.protocol !== "file:") document.write(`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2">`)</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-e935ef01ae1c1829.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="pubgrub" data-themes="" data-resource-suffix="" data-rustdoc-version="1.79.0-nightly (1684a753d 2024-04-01)" data-channel="nightly" data-search-js="search-42d8da7a6b9792c2.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-4c98445ec4002617.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-12cf3b4f4f9dc36d.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../pubgrub/index.html">pubgrub</a><span class="version">0.2.1</span></h2></div><h2 class="location"><a href="#">DependencyProvider</a></h2><div class="sidebar-elems"><section><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Err">Err</a></li><li><a href="#associatedtype.P">P</a></li><li><a href="#associatedtype.Priority">Priority</a></li><li><a href="#associatedtype.V">V</a></li><li><a href="#associatedtype.VS">VS</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.choose_version">choose_version</a></li><li><a href="#tymethod.get_dependencies">get_dependencies</a></li><li><a href="#tymethod.prioritize">prioritize</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.should_cancel">should_cancel</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In pubgrub::solver</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../pubgrub/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../index.html">pubgrub</a>::<wbr><a href="index.html">solver</a>::<wbr><a class="trait" href="#">DependencyProvider</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/pubgrub/solver.rs.html#203-278">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait DependencyProvider {
    type <a href="#associatedtype.P" class="associatedtype">P</a>: <a class="trait" href="../package/trait.Package.html" title="trait pubgrub::package::Package">Package</a>;
    type <a href="#associatedtype.V" class="associatedtype">V</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Display.html" title="trait core::fmt::Display">Display</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Ord.html" title="trait core::cmp::Ord">Ord</a>;
    type <a href="#associatedtype.VS" class="associatedtype">VS</a>: <a class="trait" href="../version_set/trait.VersionSet.html" title="trait pubgrub::version_set::VersionSet">VersionSet</a>&lt;V = Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.V" title="type pubgrub::solver::DependencyProvider::V">V</a>&gt;;
    type <a href="#associatedtype.Priority" class="associatedtype">Priority</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Ord.html" title="trait core::cmp::Ord">Ord</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>;
    type <a href="#associatedtype.Err" class="associatedtype">Err</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + 'static;

    // Required methods
    fn <a href="#tymethod.prioritize" class="fn">prioritize</a>(&amp;self, package: &amp;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.P" title="type pubgrub::solver::DependencyProvider::P">P</a>, range: &amp;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.VS" title="type pubgrub::solver::DependencyProvider::VS">VS</a>) -&gt; Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.Priority" title="type pubgrub::solver::DependencyProvider::Priority">Priority</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.choose_version" class="fn">choose_version</a>(
        &amp;self,
        package: &amp;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.P" title="type pubgrub::solver::DependencyProvider::P">P</a>,
        range: &amp;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.VS" title="type pubgrub::solver::DependencyProvider::VS">VS</a>
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.V" title="type pubgrub::solver::DependencyProvider::V">V</a>&gt;, Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.Err" title="type pubgrub::solver::DependencyProvider::Err">Err</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_dependencies" class="fn">get_dependencies</a>(
        &amp;self,
        package: &amp;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.P" title="type pubgrub::solver::DependencyProvider::P">P</a>,
        version: &amp;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.V" title="type pubgrub::solver::DependencyProvider::V">V</a>
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="enum.Dependencies.html" title="enum pubgrub::solver::Dependencies">Dependencies</a>&lt;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.P" title="type pubgrub::solver::DependencyProvider::P">P</a>, Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.VS" title="type pubgrub::solver::DependencyProvider::VS">VS</a>&gt;, Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.Err" title="type pubgrub::solver::DependencyProvider::Err">Err</a>&gt;;

    // Provided method
    fn <a href="#method.should_cancel" class="fn">should_cancel</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.Err" title="type pubgrub::solver::DependencyProvider::Err">Err</a>&gt; { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Trait that allows the algorithm to retrieve available packages and their dependencies.
An implementor needs to be supplied to the <a href="fn.resolve.html" title="fn pubgrub::solver::resolve">resolve</a> function.</p>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.P" class="method"><a class="src rightside" href="../../src/pubgrub/solver.rs.html#205">source</a><h4 class="code-header">type <a href="#associatedtype.P" class="associatedtype">P</a>: <a class="trait" href="../package/trait.Package.html" title="trait pubgrub::package::Package">Package</a></h4></section></summary><div class="docblock"><p>How this provider stores the name of the packages.</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.V" class="method"><a class="src rightside" href="../../src/pubgrub/solver.rs.html#208">source</a><h4 class="code-header">type <a href="#associatedtype.V" class="associatedtype">V</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Display.html" title="trait core::fmt::Display">Display</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Ord.html" title="trait core::cmp::Ord">Ord</a></h4></section></summary><div class="docblock"><p>How this provider stores the versions of the packages.</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.VS" class="method"><a class="src rightside" href="../../src/pubgrub/solver.rs.html#212">source</a><h4 class="code-header">type <a href="#associatedtype.VS" class="associatedtype">VS</a>: <a class="trait" href="../version_set/trait.VersionSet.html" title="trait pubgrub::version_set::VersionSet">VersionSet</a>&lt;V = Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.V" title="type pubgrub::solver::DependencyProvider::V">V</a>&gt;</h4></section></summary><div class="docblock"><p>How this provider stores the version requirements for the packages.
The requirements must be able to process the same kind of version as this dependency provider.</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.Priority" class="method"><a class="src rightside" href="../../src/pubgrub/solver.rs.html#246">source</a><h4 class="code-header">type <a href="#associatedtype.Priority" class="associatedtype">Priority</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Ord.html" title="trait core::cmp::Ord">Ord</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a></h4></section></summary><div class="docblock"><p>The type returned from <code>prioritize</code>. The resolver does not care what type this is
as long as it can pick a largest one and clone it.</p>
<p><a href="https://doc.rust-lang.org/nightly/core/cmp/struct.Reverse.html" title="struct core::cmp::Reverse">std::cmp::Reverse</a> can be useful if you want to pick the package with
the fewest versions that match the outstanding constraint.</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.Err" class="method"><a class="src rightside" href="../../src/pubgrub/solver.rs.html#251">source</a><h4 class="code-header">type <a href="#associatedtype.Err" class="associatedtype">Err</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + 'static</h4></section></summary><div class="docblock"><p>The kind of error returned from these methods.</p>
<p>Returning this signals that resolution should fail with this error.</p>
</div></details></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.prioritize" class="method"><a class="src rightside" href="../../src/pubgrub/solver.rs.html#240">source</a><h4 class="code-header">fn <a href="#tymethod.prioritize" class="fn">prioritize</a>(&amp;self, package: &amp;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.P" title="type pubgrub::solver::DependencyProvider::P">P</a>, range: &amp;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.VS" title="type pubgrub::solver::DependencyProvider::VS">VS</a>) -&gt; Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.Priority" title="type pubgrub::solver::DependencyProvider::Priority">Priority</a></h4></section></summary><div class="docblock"><p><a href="https://github.com/dart-lang/pub/blob/master/doc/solver.md#decision-making">Decision making</a>
is the process of choosing the next package
and version that will be appended to the partial solution.</p>
<p>Every time such a decision must be made, the resolver looks at all the potential valid
packages that have changed, and a asks the dependency provider how important each one is.
For each one it calls <code>prioritize</code> with the name of the package and the current set of
acceptable versions.
The resolver will then pick the package with the highes priority from all the potential valid
packages.</p>
<p>The strategy employed to prioritize packages
cannot change the existence of a solution or not,
but can drastically change the performances of the solver,
or the properties of the solution.
The documentation of Pub (PubGrub implementation for the dart programming language)
states the following:</p>
<blockquote>
<p>Pub chooses the latest matching version of the package
with the fewest versions that match the outstanding constraint.
This tends to find conflicts earlier if any exist,
since these packages will run out of versions to try more quickly.
But there’s likely room for improvement in these heuristics.</p>
</blockquote>
<p>Note: the resolver may call this even when the range has not change,
if it is more efficient for the resolveres internal data structures.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.choose_version" class="method"><a class="src rightside" href="../../src/pubgrub/solver.rs.html#256-260">source</a><h4 class="code-header">fn <a href="#tymethod.choose_version" class="fn">choose_version</a>(
    &amp;self,
    package: &amp;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.P" title="type pubgrub::solver::DependencyProvider::P">P</a>,
    range: &amp;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.VS" title="type pubgrub::solver::DependencyProvider::VS">VS</a>
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.V" title="type pubgrub::solver::DependencyProvider::V">V</a>&gt;, Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.Err" title="type pubgrub::solver::DependencyProvider::Err">Err</a>&gt;</h4></section></summary><div class="docblock"><p>Once the resolver has found the highest <code>Priority</code> package from all potential valid
packages, it needs to know what vertion of that package to use. The most common pattern
is to select the largest vertion that the range contains.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.get_dependencies" class="method"><a class="src rightside" href="../../src/pubgrub/solver.rs.html#264-268">source</a><h4 class="code-header">fn <a href="#tymethod.get_dependencies" class="fn">get_dependencies</a>(
    &amp;self,
    package: &amp;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.P" title="type pubgrub::solver::DependencyProvider::P">P</a>,
    version: &amp;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.V" title="type pubgrub::solver::DependencyProvider::V">V</a>
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="enum.Dependencies.html" title="enum pubgrub::solver::Dependencies">Dependencies</a>&lt;Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.P" title="type pubgrub::solver::DependencyProvider::P">P</a>, Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.VS" title="type pubgrub::solver::DependencyProvider::VS">VS</a>&gt;, Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.Err" title="type pubgrub::solver::DependencyProvider::Err">Err</a>&gt;</h4></section></summary><div class="docblock"><p>Retrieves the package dependencies.
Return <a href="enum.Dependencies.html#variant.Unknown" title="variant pubgrub::solver::Dependencies::Unknown">Dependencies::Unknown</a> if its dependencies are unknown.</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.should_cancel" class="method"><a class="src rightside" href="../../src/pubgrub/solver.rs.html#275-277">source</a><h4 class="code-header">fn <a href="#method.should_cancel" class="fn">should_cancel</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, Self::<a class="associatedtype" href="trait.DependencyProvider.html#associatedtype.Err" title="type pubgrub::solver::DependencyProvider::Err">Err</a>&gt;</h4></section></summary><div class="docblock"><p>This is called fairly regularly during the resolution,
if it returns an Err then resolution will be terminated.
This is helpful if you want to add some form of early termination like a timeout,
or you want to add some form of user feedback if things are taking a while.
If not provided the resolver will run as long as needed.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-DependencyProvider-for-OfflineDependencyProvider%3CP,+VS%3E" class="impl"><a class="src rightside" href="../../src/pubgrub/solver.rs.html#352-386">source</a><a href="#impl-DependencyProvider-for-OfflineDependencyProvider%3CP,+VS%3E" class="anchor">§</a><h3 class="code-header">impl&lt;P: <a class="trait" href="../package/trait.Package.html" title="trait pubgrub::package::Package">Package</a>, VS: <a class="trait" href="../version_set/trait.VersionSet.html" title="trait pubgrub::version_set::VersionSet">VersionSet</a>&gt; <a class="trait" href="trait.DependencyProvider.html" title="trait pubgrub::solver::DependencyProvider">DependencyProvider</a> for <a class="struct" href="struct.OfflineDependencyProvider.html" title="struct pubgrub::solver::OfflineDependencyProvider">OfflineDependencyProvider</a>&lt;P, VS&gt;</h3></section></summary><div class="docblock"><p>An implementation of <a href="trait.DependencyProvider.html" title="trait pubgrub::solver::DependencyProvider">DependencyProvider</a> that
contains all dependency information available in memory.
Currently packages are picked with the fewest versions contained in the constraints first.
But, that may change in new versions if better heuristics are found.
Versions are picked with the newest versions first.</p>
</div><div class="impl-items"><section id="associatedtype.P-1" class="associatedtype trait-impl"><a href="#associatedtype.P-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.P" class="associatedtype">P</a> = P</h4></section><section id="associatedtype.V-1" class="associatedtype trait-impl"><a href="#associatedtype.V-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.V" class="associatedtype">V</a> = &lt;VS as <a class="trait" href="../version_set/trait.VersionSet.html" title="trait pubgrub::version_set::VersionSet">VersionSet</a>&gt;::<a class="associatedtype" href="../version_set/trait.VersionSet.html#associatedtype.V" title="type pubgrub::version_set::VersionSet::V">V</a></h4></section><section id="associatedtype.VS-1" class="associatedtype trait-impl"><a href="#associatedtype.VS-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.VS" class="associatedtype">VS</a> = VS</h4></section><section id="associatedtype.Err-1" class="associatedtype trait-impl"><a href="#associatedtype.Err-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Err" class="associatedtype">Err</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section><section id="associatedtype.Priority-1" class="associatedtype trait-impl"><a href="#associatedtype.Priority-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Priority" class="associatedtype">Priority</a> = <a class="struct" href="https://doc.rust-lang.org/nightly/core/cmp/struct.Reverse.html" title="struct core::cmp::Reverse">Reverse</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;</h4></section></div></details></div><script src="../../trait.impl/pubgrub/solver/trait.DependencyProvider.js" async></script></section></div></main></body></html>